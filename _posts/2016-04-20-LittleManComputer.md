---
layout: post
title: Little Man Computer
---

I had never seen this mini-assembler-based educational computer before. [wikipedia.org/Little_man_computer](https://en.wikipedia.org/wiki/Little_man_computer).

I couldn't find a good online emulator, so I wrote one: [Little Man Computer Emulator](http://paulhankin.github.io/lmc/lmc.html).

Enter the program on the left, click "Assemble", enter some inputs if your program needs them, and then step
through the execution.

It's probably got some bugs since it was a quick hack, but it worked on the examples I tried it on.

<!--more-->

Here's some example programs.

* [Max of 3 numbers](http://paulhankin.github.io/lmc/lmc.html?program=ICAgIElOUAogICAgU1RBIE0wCiAgICBJTlAKICAgIFNUQSBNMQogICAgSU5QCiAgICBTVEEgTTIKCiAgICBTVUIgTTEKICAgIEJSUCBKMQogICAgTERBIE0xCiAgICBTVEEgTTIKSjEgIExEQSBNMgogICAgU1VCIE0wCiAgICBCUlAgSjIKICAgIExEQSBNMAogICAgU1RBIE0yCkoyICBMREEgTTIKICAgIE9VVAogICAgSExUCk0wICBEQVQKTTEgIERBVApNMiAgREFU&input=MjEzCjk4Nwo4OAo=)
* [Multiply 2 numbers](http://paulhankin.github.io/lmc/lmc.html?program=ICAgICBJTlAKICAgICBTVEEgUjAKICAgICBJTlAKICAgICBTVEEgUjEKCkxPT1AgTERBIFIxCiAgICAgQlJaIEVORAogICAgIFNVQiBPTkUKICAgICBTVEEgUjEKICAgICBMREEgUkVTCiAgICAgQUREIFIwCiAgICAgU1RBIFJFUwogICAgIEJSQSBMT09QCgpFTkQgIExEQSBSRVMKICAgICBPVVQKCiAgICAgLy8gVGVtcG9yYXJ5IHN0b3JhZ2UKUjEgICBEQVQKUjAgICBEQVQKUkVTICBEQVQKCiAgICAgLy8gQ29uc3RhbnRzCk9ORSAgREFUIDE=&input=NAo1)
* [Shift left](http://paulhankin.github.io/lmc/lmc.html?program=ICAgICBJTlAKICAgICBTVEEgUjAKICAgICBJTlAKICAgICBTVEEgUjEKTE9PUCBMREEgUjEKICAgICBCUlogRU5ECiAgICAgU1VCIE9ORQogICAgIFNUQSBSMQogICAgIExEQSBSMAogICAgIEFERCBSMAogICAgIFNUQSBSMAogICAgIEJSQSBMT09QCkVORCAgTERBIFIwCiAgICAgT1VUCgpSMSAgIERBVApSMCAgIERBVApPTkUgIERBVCAx&input=MTQKMw==)
* [Copy N inputs to an array](http://paulhankin.github.io/lmc/lmc.html?program=ICAgICBJTlAKICAgICBTVEEgQwpMICAgIExEQSBDCiAgICAgQlJaIEMKICAgICBTVUIgT05FCiAgICAgU1RBIEMKICAgICBMREEgVAogICAgIEFERCBPTkUKICAgICBTVEEgVAogICAgIEFERCBTVEFPUAogICAgIFNUQSBTVEFJCiAgICAgSU5QClNUQUkgREFUCiAgICAgQlJBIEwKCkMgICAgREFUCk9ORSAgREFUIDEKU1RBT1AgREFUIDMwMApUICAgIERBVCA0OQo=&input=NQoxMAoxMDEKMTQKOTk4CjgK)
* [Sieve of Erastothenes](http://paulhankin.github.io/lmc/lmc.html?program=TE9PUCBMREEgQwogQUREIE9ORQogU1RBIEMKIFNVQiBWNjkKIEJSUCBFTkQKIExEQSBDCiBBREQgTERJTlMKIFNUQSBSRUFESU5TCiBSRUFESU5TIERBVAogQlJaIFBSSU1FCiBCUkEgTE9PUApQUklNRQogTERBIEMKIE9VVAogU1RBIFIKV1JJVEVMT09QCiBMREEgUgogU1VCIFY2OQogQlJQIExPT1AKIExEQSBSCiBBREQgU1RJTlMKIFNUQSBXUklOUwogTERBIEMgLy8gZG9lc24ndCBtYXR0ZXIKV1JJTlMgREFUCiBMREEgUgogQUREIEMKIFNUQSBSCiBCUkEgV1JJVEVMT09QCkVORCBITFQKClY2OSBEQVQgNjkKTERJTlMgREFUIDUzMQpTVElOUyBEQVQgMzMxCkMgREFUIDEKT05FIERBVCAxClIgREFU&input=IA%3D%3D)

The last two are the most interesting: LMC doesn't have indirect addressing -- the only load/store instructions are `LDA xx` and `STA xx` where `xx` is a fixed address. To work around that, the code modifies itself, writing the appropriate `LDA` or `STA` instruction.

And here's code that sorts input. It reads N, then a sequence of N numbers from the input and sorts them.

[Sort input](http://paulhankin.github.io/lmc/lmc.html?program=Ly8gUmVhZCBOLCB0aGVuIE4gbnVtYmVycwogICAgIElOUAogICAgIFNUQSBOCkxPT1AgU1RBIFIwCiAgICAgQlJaIFNPUlQKCSBJTlAKU0lOMCBTVEEgTVRPUAogICAgIExEQSBTSU4wCiAgICAgQUREIGsxCiAgICAgU1RBIFNJTjAKCSBMREEgUjAKCSBTVUIgazEKICAgICBCUkEgTE9PUAoKU09SVCBMREEgTgogICAgIFNVQiBrMQogICAgIEFERCBPVVQwCiAgICAgU1RBIE9VVDAKICAgICBMREEgTgogICAgIApTMCAgIFNUQSBOCiAgICAgQlJaIEVORAoKU0xQMCBTVUIgazEKICAgICBTVEEgUjAKICAgICBCUlogRU5EMApMREEwdjEgTERBIE1UT1AKU1VCMXYwIFNVQiBNVE9QX1BMVVNfT05FCiAgICAgICBCUlAgTk9TV0FQCkxEQTB2MiBMREEgTVRPUAogICAgICAgU1RBIFRNUApMREExdjAgTERBIE1UT1BfUExVU19PTkUKU1RBMHYwIFNUQSBNVE9QCiAgICAgICBMREEgVE1QClNUQTF2MCBTVEEgTVRPUF9QTFVTX09ORQpOT1NXQVAKICAgICBMREEgazEgCiAgICAgU1RBIEFERFJJTkNWQUwKICAgICBMREEga1JFVDAKICAgICBBREQgazYwMAogICAgIFNUQSBBRERSSU5DUkVUCiAgICAgQlJBIEFERFJJTkMKUkVUMCBMREEgUjAKICAgICBCUkEgU0xQMApFTkQwCiAgICAgTERBIGsxCiAgICAgU1VCIE4KICAgICBTVEEgQUREUklOQ1ZBTAogICAgIExEQSBrUkVUMQogICAgIEFERCBrNjAwCiAgICAgU1RBIEFERFJJTkNSRVQKICAgICBCUkEgQUREUklOQwpSRVQxCk9VVDAgTERBIE1UT1AgLy8gdXBkYXRlZAogICAgIE9VVAogICAgIExEQSBPVVQwCiAgICAgU1VCIGsxCiAgICAgU1RBIE9VVDAKICAgICBMREEgTgogICAgIFNVQiBrMQogICAgIEJSQSBTMApFTkQgIEhMVAoKQUREUklOQwoJIExEQSBMREEwdjEKCSBBREQgQUREUklOQ1ZBTAoJIFNUQSBMREEwdjEKCgkgTERBIFNVQjF2MAoJIEFERCBBRERSSU5DVkFMCgkgU1RBIFNVQjF2MAoKCSBMREEgTERBMHYyCgkgQUREIEFERFJJTkNWQUwKCSBTVEEgTERBMHYyCgoJIExEQSBMREExdjAKCSBBREQgQUREUklOQ1ZBTAoJIFNUQSBMREExdjAKCgkgTERBIFNUQTB2MAoJIEFERCBBRERSSU5DVkFMCgkgU1RBIFNUQTB2MAoKCSBMREEgU1RBMXYwCgkgQUREIEFERFJJTkNWQUwKCSBTVEEgU1RBMXYwCkFERFJJTkNSRVQgQlJBIEFERFJJTkNSRVQgLy8gb3ZlcndyaXRlIGJlZm9yZSBjYWxsaW5nCgpOICAgIERBVApSMCAgIERBVApUTVAgIERBVAprMSAgIERBVCAxCms1MDAgREFUIDUwMAprNjAwIERBVCA2MDAKa1JFVDAgREFUIFJFVDAKa1JFVDEgREFUIFJFVDEKQUREUklOQ1ZBTCBEQVQKCk1UT1AgREFUCk1UT1BfUExVU19PTkUgREFUCgo=&input=Nwo5OTkKMTI0CjEyNgoxMjUKNDIKOTk4CjY0).

This code has a subroutine, which requires the branch instruction of the subroutine to be overwritten with a branch instruction to the correct return address before calling.
The code depends on integer addition wrapping modulo 1000 -- my implementation of the LMC does this, but this code may need adapting to work on other versions of the machine, as the spec leaves the overflow behavior of addition and subtraction unspecified.
